# Legal RAG System - Environment Variables
# このファイルをコピーして .env を作成してください: cp .env.example .env

# ========================================
# 埋め込みモデル設定
# ========================================
EMBEDDING_PROVIDER=huggingface
EMBEDDING_MODEL=intfloat/multilingual-e5-large
EMBEDDING_DIM=1024

# ========================================
# LLM設定
# ========================================
LLM_PROVIDER=ollama
LLM_MODEL=qwen3:8b
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2048

# ========================================
# Retriever設定
# ========================================
# RETRIEVER_TYPE: 検索方法の選択
#   - vector: FAISSベクトル検索のみ（推奨・デフォルト）
#   - bm25: BM25キーワード検索のみ（大規模データセットでは使用不可）
#   - hybrid: VectorとBM25の組み合わせ（大規模データセットでは使用不可）
#
# 注意: BM25とHybridモードは280万件のデータセットで50-60GBのメモリを必要とし、
#       現在のシステム構成（62GBメモリ）では実行不可能です。
#       詳細は docs/supplemental/memory_issue_analysis.md を参照してください。
RETRIEVER_TYPE=vector
RETRIEVER_TOP_K=10
USE_MMR=true
MMR_LAMBDA=0.5
MMR_FETCH_K_MAX=50

# ========================================
# Hybrid Retriever設定
# ========================================
FUSION_METHOD=rrf  # rrf/weighted_rrf/weighted
VECTOR_WEIGHT=0.5
BM25_WEIGHT=0.5
RRF_K=60
FETCH_K_MULTIPLIER=2

# ========================================
# BM25設定
# ========================================
BM25_TOKENIZER=auto  # auto/sudachi/janome/mecab/ngram/simple

# ========================================
# Reranker設定
# ========================================
RERANKER_ENABLED=false
RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L-12-v2
RERANKER_TOP_N=5

# ========================================
# データパス（プロジェクトルートからの相対パス）
# ========================================
VECTOR_STORE_PATH=data/faiss_index
DATA_PATH=data/egov_laws.jsonl

# ========================================
# Ollama設定
# ========================================
OLLAMA_HOST=http://localhost:11434
