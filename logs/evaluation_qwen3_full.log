nohup: 入力を無視します
Restoring persistent environment...
[OK] Added persistent uv to PATH.
[OK] Added persistent ollama to PATH.
[OK] Set OLLAMA_MODELS to /home/toronto02/work/.ollama-models
[INFO] Using SudachiPy tokenizer (default).
[OK] Activated Python virtual environment.

Environment restored.
[OK] Ollama server is already running.

All setup complete. You can now run your scripts.
/home/toronto02/statutes-rags/app/retrieval/vector_retriever.py:38: LangChainDeprecationWarning: The class `HuggingFaceEmbeddings` was deprecated in LangChain 0.2.2 and will be removed in 1.0. An updated version of the class exists in the `langchain-huggingface package and should be used instead. To use it run `pip install -U `langchain-huggingface` and import as `from `langchain_huggingface import HuggingFaceEmbeddings``.
  self.embeddings = HuggingFaceEmbeddings(
/home/toronto02/statutes-rags/app/retrieval/rag_pipeline.py:52: LangChainDeprecationWarning: The class `Ollama` was deprecated in LangChain 0.3.1 and will be removed in 1.0.0. An updated version of the class exists in the `langchain-ollama package and should be used instead. To use it run `pip install -U `langchain-ollama` and import as `from `langchain_ollama import OllamaLLM``.
  self.llm = Ollama(
Loading dataset from datasets/lawqa_jp/data/selection.json...
Total samples to evaluate: 140

Initializing RAG pipeline...
RAG Mode: Enabled
Retriever Type: vector
LLM Model: qwen3:8b
Top-K: 10

Evaluating:   0%|          | 0/140 [00:00<?, ?it/s]Evaluating:   1%|          | 1/140 [00:09<22:06,  9.55s/it]Evaluating:   1%|▏         | 2/140 [01:10<1:31:13, 39.67s/it]Evaluating:   2%|▏         | 3/140 [02:11<1:52:34, 49.30s/it]Evaluating:   3%|▎         | 4/140 [03:11<2:01:59, 53.82s/it]Evaluating:   4%|▎         | 5/140 [03:57<1:54:51, 51.05s/it]Evaluating:   4%|▍         | 6/140 [04:07<1:22:11, 36.80s/it]Evaluating:   5%|▌         | 7/140 [04:24<1:07:49, 30.60s/it]Evaluating:   6%|▌         | 8/140 [04:42<57:59, 26.36s/it]  Evaluating:   6%|▋         | 9/140 [04:55<48:52, 22.38s/it]Evaluating:   7%|▋         | 10/140 [05:07<41:30, 19.16s/it]Evaluating:   8%|▊         | 11/140 [05:31<44:28, 20.69s/it]Evaluating:   9%|▊         | 12/140 [05:53<44:44, 20.97s/it]Evaluating:   9%|▉         | 13/140 [06:04<37:43, 17.82s/it]Evaluating:  10%|█         | 14/140 [06:23<38:28, 18.32s/it]Evaluating:  11%|█         | 15/140 [10:20<2:55:17, 84.14s/it]Evaluating:  11%|█▏        | 16/140 [10:35<2:11:13, 63.50s/it]Evaluating:  12%|█▏        | 17/140 [10:49<1:39:22, 48.48s/it]Evaluating:  13%|█▎        | 18/140 [11:01<1:16:06, 37.43s/it]Evaluating:  14%|█▎        | 19/140 [11:13<1:00:03, 29.78s/it]Evaluating:  14%|█▍        | 20/140 [11:27<50:06, 25.05s/it]  Evaluating:  15%|█▌        | 21/140 [11:37<40:53, 20.62s/it]Evaluating:  16%|█▌        | 22/140 [11:56<39:40, 20.17s/it]Evaluating:  16%|█▋        | 23/140 [12:15<38:43, 19.86s/it]Evaluating:  17%|█▋        | 24/140 [12:35<38:07, 19.72s/it]Evaluating:  18%|█▊        | 25/140 [12:56<38:40, 20.17s/it]Evaluating:  19%|█▊        | 26/140 [13:13<36:27, 19.19s/it]Evaluating:  19%|█▉        | 27/140 [13:28<34:10, 18.15s/it]Evaluating:  20%|██        | 28/140 [13:39<29:36, 15.86s/it]Evaluating:  21%|██        | 29/140 [19:12<3:25:10, 110.91s/it]Evaluating:  21%|██▏       | 30/140 [19:27<2:31:02, 82.39s/it] Evaluating:  22%|██▏       | 31/140 [19:56<2:00:36, 66.39s/it]Evaluating:  23%|██▎       | 32/140 [20:06<1:28:45, 49.31s/it]Evaluating:  24%|██▎       | 33/140 [20:13<1:05:18, 36.63s/it]Evaluating:  24%|██▍       | 34/140 [20:19<48:19, 27.35s/it]  Evaluating:  25%|██▌       | 35/140 [20:24<36:04, 20.61s/it]Evaluating:  26%|██▌       | 36/140 [20:32<29:13, 16.86s/it]Evaluating:  26%|██▋       | 37/140 [20:39<24:10, 14.08s/it]Evaluating:  27%|██▋       | 38/140 [20:47<20:56, 12.32s/it]Evaluating:  28%|██▊       | 39/140 [20:56<19:02, 11.31s/it]Evaluating:  29%|██▊       | 40/140 [21:04<16:54, 10.15s/it]Evaluating:  29%|██▉       | 41/140 [21:07<13:18,  8.07s/it]Evaluating:  30%|███       | 42/140 [21:12<11:28,  7.02s/it]Evaluating:  31%|███       | 43/140 [21:17<10:23,  6.43s/it]Evaluating:  31%|███▏      | 44/140 [21:22<09:49,  6.14s/it]Evaluating:  32%|███▏      | 45/140 [21:35<12:41,  8.01s/it]Evaluating:  33%|███▎      | 46/140 [27:05<2:43:55, 104.63s/it]Evaluating:  34%|███▎      | 47/140 [27:42<2:11:04, 84.56s/it] Evaluating:  34%|███▍      | 48/140 [27:50<1:34:27, 61.60s/it]Evaluating:  35%|███▌      | 49/140 [28:14<1:16:01, 50.13s/it]Evaluating:  36%|███▌      | 50/140 [28:21<55:43, 37.15s/it]  Evaluating:  36%|███▋      | 51/140 [28:26<40:51, 27.54s/it]Evaluating:  37%|███▋      | 52/140 [28:30<30:14, 20.62s/it]Evaluating:  38%|███▊      | 53/140 [28:40<25:13, 17.39s/it]Evaluating:  39%|███▊      | 54/140 [28:48<20:45, 14.48s/it]Evaluating:  39%|███▉      | 55/140 [28:55<17:15, 12.18s/it]Evaluating:  40%|████      | 56/140 [34:25<2:30:34, 107.56s/it]Evaluating:  41%|████      | 57/140 [34:36<1:48:57, 78.76s/it] Evaluating:  41%|████▏     | 58/140 [34:49<1:20:43, 59.06s/it]Evaluating:  42%|████▏     | 59/140 [34:56<58:21, 43.23s/it]  Evaluating:  43%|████▎     | 60/140 [34:59<41:53, 31.41s/it]Evaluating:  44%|████▎     | 61/140 [35:04<30:39, 23.28s/it]Evaluating:  44%|████▍     | 62/140 [35:08<22:50, 17.57s/it]Evaluating:  45%|████▌     | 63/140 [35:14<18:15, 14.23s/it]Evaluating:  46%|████▌     | 64/140 [35:23<15:50, 12.51s/it]Evaluating:  46%|████▋     | 65/140 [35:28<12:58, 10.38s/it]Evaluating:  47%|████▋     | 66/140 [35:39<12:57, 10.51s/it]Evaluating:  48%|████▊     | 67/140 [36:04<18:00, 14.81s/it]Evaluating:  49%|████▊     | 68/140 [36:09<14:13, 11.86s/it]Evaluating:  49%|████▉     | 69/140 [36:19<13:19, 11.26s/it]Evaluating:  50%|█████     | 70/140 [36:23<10:39,  9.13s/it]Evaluating:  51%|█████     | 71/140 [36:26<08:33,  7.44s/it]Evaluating:  51%|█████▏    | 72/140 [36:36<09:04,  8.01s/it]Evaluating:  52%|█████▏    | 73/140 [36:49<10:39,  9.55s/it]Evaluating:  53%|█████▎    | 74/140 [36:55<09:25,  8.57s/it]Evaluating:  54%|█████▎    | 75/140 [36:59<07:40,  7.09s/it]Evaluating:  54%|█████▍    | 76/140 [37:09<08:35,  8.06s/it]Evaluating:  55%|█████▌    | 77/140 [37:19<08:53,  8.47s/it]Evaluating:  56%|█████▌    | 78/140 [42:49<1:48:23, 104.90s/it]Evaluating:  56%|█████▋    | 79/140 [43:13<1:22:05, 80.75s/it] Evaluating:  57%|█████▋    | 80/140 [48:43<2:35:31, 155.52s/it]Evaluating:  58%|█████▊    | 81/140 [48:50<1:49:08, 111.00s/it]Evaluating:  59%|█████▊    | 82/140 [48:57<1:17:03, 79.72s/it] Evaluating:  59%|█████▉    | 83/140 [49:03<54:55, 57.82s/it]  Evaluating:  60%|██████    | 84/140 [49:11<39:53, 42.73s/it]Evaluating:  61%|██████    | 85/140 [49:21<30:14, 33.00s/it]Evaluating:  61%|██████▏   | 86/140 [54:51<1:49:56, 122.15s/it]Evaluating:  62%|██████▏   | 87/140 [54:55<1:16:32, 86.64s/it] Evaluating:  63%|██████▎   | 88/140 [55:00<53:40, 61.93s/it]  Evaluating:  64%|██████▎   | 89/140 [55:07<38:51, 45.72s/it]Evaluating:  64%|██████▍   | 90/140 [55:17<28:59, 34.80s/it]Evaluating:  65%|██████▌   | 91/140 [55:22<21:04, 25.80s/it]Evaluating:  66%|██████▌   | 92/140 [55:28<15:52, 19.84s/it]Evaluating:  66%|██████▋   | 93/140 [55:34<12:30, 15.97s/it]Evaluating:  67%|██████▋   | 94/140 [55:50<12:03, 15.73s/it]Evaluating:  68%|██████▊   | 95/140 [55:58<10:15, 13.68s/it]Evaluating:  69%|██████▊   | 96/140 [56:09<09:15, 12.63s/it]Evaluating:  69%|██████▉   | 97/140 [56:12<07:09,  9.99s/it]Evaluating:  70%|███████   | 98/140 [56:21<06:44,  9.64s/it]Evaluating:  71%|███████   | 99/140 [56:28<06:02,  8.85s/it]Evaluating:  71%|███████▏  | 100/140 [56:32<04:54,  7.37s/it]Evaluating:  72%|███████▏  | 101/140 [56:45<05:52,  9.04s/it]Context length limit (4000) reached. Truncating at document 10/10
Evaluating:  73%|███████▎  | 102/140 [56:53<05:23,  8.52s/it]Evaluating:  74%|███████▎  | 103/140 [57:00<05:01,  8.15s/it]Evaluating:  74%|███████▍  | 104/140 [57:10<05:11,  8.65s/it]Evaluating:  75%|███████▌  | 105/140 [57:21<05:34,  9.56s/it]Evaluating:  76%|███████▌  | 106/140 [57:33<05:45, 10.16s/it]Evaluating:  76%|███████▋  | 107/140 [57:39<04:58,  9.04s/it]Evaluating:  77%|███████▋  | 108/140 [57:45<04:16,  8.01s/it]Evaluating:  78%|███████▊  | 109/140 [57:51<03:48,  7.36s/it]Evaluating:  79%|███████▊  | 110/140 [58:07<04:58,  9.96s/it]Evaluating:  79%|███████▉  | 111/140 [58:12<04:11,  8.67s/it]Evaluating:  80%|████████  | 112/140 [58:28<05:01, 10.76s/it]Evaluating:  81%|████████  | 113/140 [58:35<04:22,  9.71s/it]Evaluating:  81%|████████▏ | 114/140 [58:42<03:45,  8.69s/it]Evaluating:  82%|████████▏ | 115/140 [58:56<04:23, 10.54s/it]Evaluating:  83%|████████▎ | 116/140 [59:06<04:03, 10.13s/it]Evaluating:  84%|████████▎ | 117/140 [59:09<03:09,  8.22s/it]Evaluating:  84%|████████▍ | 118/140 [59:22<03:32,  9.66s/it]Evaluating:  85%|████████▌ | 119/140 [59:32<03:21,  9.58s/it]Evaluating:  86%|████████▌ | 120/140 [59:41<03:08,  9.44s/it]Evaluating:  86%|████████▋ | 121/140 [1:00:11<04:57, 15.65s/it]Evaluating:  87%|████████▋ | 122/140 [1:00:19<03:59, 13.32s/it]Evaluating:  88%|████████▊ | 123/140 [1:00:32<03:43, 13.14s/it]Evaluating:  89%|████████▊ | 124/140 [1:00:35<02:42, 10.18s/it]Evaluating:  89%|████████▉ | 125/140 [1:00:55<03:19, 13.29s/it]Evaluating:  90%|█████████ | 126/140 [1:01:07<02:57, 12.66s/it]Evaluating:  91%|█████████ | 127/140 [1:01:12<02:14, 10.32s/it]Evaluating:  91%|█████████▏| 128/140 [1:01:19<01:52,  9.41s/it]Evaluating:  92%|█████████▏| 129/140 [1:01:27<01:38,  8.94s/it]Evaluating:  93%|█████████▎| 130/140 [1:01:33<01:22,  8.23s/it]Evaluating:  94%|█████████▎| 131/140 [1:01:39<01:07,  7.54s/it]Evaluating:  94%|█████████▍| 132/140 [1:01:45<00:55,  6.98s/it]Evaluating:  95%|█████████▌| 133/140 [1:01:49<00:41,  5.99s/it]Evaluating:  96%|█████████▌| 134/140 [1:01:53<00:32,  5.41s/it]Evaluating:  96%|█████████▋| 135/140 [1:02:08<00:42,  8.47s/it]Evaluating:  97%|█████████▋| 136/140 [1:07:39<07:00, 105.03s/it]Evaluating:  98%|█████████▊| 137/140 [1:07:44<03:45, 75.30s/it] Evaluating:  99%|█████████▊| 138/140 [1:07:51<01:49, 54.55s/it]Evaluating:  99%|█████████▉| 139/140 [1:13:21<02:17, 137.21s/it]Evaluating: 100%|██████████| 140/140 [1:13:28<00:00, 98.23s/it] Evaluating: 100%|██████████| 140/140 [1:13:28<00:00, 31.49s/it]
Error during LLM invocation: HTTPConnectionPool(host='localhost', port=11434): Read timed out. (read timeout=60)
Error during LLM invocation: HTTPConnectionPool(host='localhost', port=11434): Read timed out. (read timeout=60)
Error during LLM invocation: HTTPConnectionPool(host='localhost', port=11434): Read timed out. (read timeout=60)

==================================================
EVALUATION RESULTS
==================================================
Total Samples: 140
Correct: 82
Incorrect: 58
Accuracy: 58.57%
==================================================

Detailed results saved to: evaluation_results_qwen3_full.json
